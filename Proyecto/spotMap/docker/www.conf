[www]
; ⚠️ PROPRIETARY CODE - DO NOT DISTRIBUTE
; SpotMap PHP-FPM Pool Configuration

user = spotmap
group = spotmap

listen = 127.0.0.1:9000
listen.owner = spotmap
listen.group = spotmap
listen.mode = 0660

listen.backlog = 511
listen.allowed_clients = 127.0.0.1

pm = dynamic
pm.max_children = 50
pm.start_servers = 5
pm.min_spare_servers = 5
pm.max_spare_servers = 35
pm.max_requests = 500
pm.max_requests_grace_period = 30s
pm.status_path = /php-fpm-status
pm.ping_path = /php-fpm-ping

; Timeouts
request_terminate_timeout = 300
request_slowlog_timeout = 10s
slowlog = /app/logs/php-fpm-slow.log

; Logging
catch_workers_output = yes
decorate_workers_output = yes

; Environment
clear_env = no
env[PATH] = /usr/local/bin:/usr/bin:/bin
env[TMP] = /tmp
env[TMPDIR] = /tmp
env[TEMP] = /tmp

; Security
security.limit_extensions = .php

; Additional settings
access.log = /app/logs/php-fpm-access.log
access.format = "%R - %u %t \"%m %r%Q%q\" %s %f %{mili}dms %{kilo}M %C%%"

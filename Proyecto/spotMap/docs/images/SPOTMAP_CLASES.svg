<?xml version="1.0" encoding="UTF-8"?>
<svg width="3200" height="2600" xmlns="http://www.w3.org/2000/svg" style="background-color: #FAFAFA;">
  <defs>
    <style>
      .title { font-size: 36px; font-weight: bold; fill: #1E3A8A; font-family: 'Segoe UI', Arial, sans-serif; }
      .class-name { font-size: 16px; font-weight: bold; fill: white; font-family: 'Segoe UI', Arial, sans-serif; }
      .attr-name { font-size: 12px; fill: #1F2937; font-family: 'Segoe UI', Arial, sans-serif; }
      .method-name { font-size: 12px; fill: #065F46; font-family: 'Segoe UI', Arial, sans-serif; font-weight: 500; }
      .legend { font-size: 12px; fill: #4B5563; font-family: 'Segoe UI', Arial, sans-serif; }
    </style>
  </defs>

  <rect width="3200" height="2600" fill="#FAFAFA"/>
  
  <!-- Header -->
  <rect width="3200" height="80" fill="#F0F9FF" stroke="#7C3AED" stroke-width="2"/>
  <text x="1600" y="45" text-anchor="middle" class="title">DIAGRAMA DE CLASES UML - SpotMap</text>
  <text x="1600" y="68" text-anchor="middle" class="legend" font-size="14">10 Clases Domain | Relaciones: Herencia, Agregación, Composición</text>

  <!-- Legend -->
  <text x="100" y="130" class="legend" font-weight="bold">Notación UML: + Público | - Privado | # Protegido | * Atributos | () Métodos</text>

  <!-- User Class -->
  <g><rect x="80" y="180" width="280" height="340" fill="#E9D5FF" stroke="#7C3AED" stroke-width="2" rx="4"/>
    <rect x="80" y="180" width="280" height="35" fill="#7C3AED" rx="4"/>
    <text x="220" y="208" text-anchor="middle" class="class-name">User</text>
    <line x1="80" y1="215" x2="360" y2="215" stroke="#7C3AED" stroke-width="1"/>
    <text x="95" y="235" class="attr-name">- id: UUID</text>
    <text x="95" y="255" class="attr-name">- email: string</text>
    <text x="95" y="275" class="attr-name">- password: string</text>
    <text x="95" y="295" class="attr-name">- fullName: string</text>
    <text x="95" y="315" class="attr-name">- role: UserRole</text>
    <text x="95" y="335" class="attr-name">- createdAt: DateTime</text>
    <line x1="80" y1="345" x2="360" y2="345" stroke="#7C3AED" stroke-width="1"/>
    <text x="95" y="365" class="method-name">+ register()</text>
    <text x="95" y="385" class="method-name">+ login()</text>
    <text x="95" y="405" class="method-name">+ updateProfile()</text>
  </g>

  <!-- Spot Class -->
  <g><rect x="520" y="180" width="280" height="380" fill="#DBEAFE" stroke="#0369A1" stroke-width="2" rx="4"/>
    <rect x="520" y="180" width="280" height="35" fill="#0369A1" rx="4"/>
    <text x="660" y="208" text-anchor="middle" class="class-name">Spot</text>
    <line x1="520" y1="215" x2="800" y2="215" stroke="#0369A1" stroke-width="1"/>
    <text x="535" y="235" class="attr-name">- id: int</text>
    <text x="535" y="255" class="attr-name">- title: string</text>
    <text x="535" y="275" class="attr-name">- description: string</text>
    <text x="535" y="295" class="attr-name">- location: Point</text>
    <text x="535" y="315" class="attr-name">- difficulty: int (1-5)</text>
    <text x="535" y="335" class="attr-name">- category: Category</text>
    <text x="535" y="355" class="attr-name">- createdBy: User</text>
    <line x1="520" y1="365" x2="800" y2="365" stroke="#0369A1" stroke-width="1"/>
    <text x="535" y="385" class="method-name">+ create()</text>
    <text x="535" y="405" class="method-name">+ getDistance(lat, lon)</text>
    <text x="535" y="425" class="method-name">+ getAverageRating()</text>
    <text x="535" y="445" class="method-name">+ addComment()</text>
  </g>

  <!-- Category Class -->
  <g><rect x="960" y="180" width="260" height="300" fill="#DBEAFE" stroke="#10B981" stroke-width="2" rx="4"/>
    <rect x="960" y="180" width="260" height="35" fill="#10B981" rx="4"/>
    <text x="1090" y="208" text-anchor="middle" class="class-name">Category</text>
    <line x1="960" y1="215" x2="1220" y2="215" stroke="#10B981" stroke-width="1"/>
    <text x="975" y="235" class="attr-name">- id: int</text>
    <text x="975" y="255" class="attr-name">- name: string</text>
    <text x="975" y="275" class="attr-name">- description: string</text>
    <text x="975" y="295" class="attr-name">- color: string</text>
    <text x="975" y="315" class="attr-name">- spotCount: int</text>
    <line x1="960" y1="325" x2="1220" y2="325" stroke="#10B981" stroke-width="1"/>
    <text x="975" y="345" class="method-name">+ getSpots()</text>
    <text x="975" y="365" class="method-name">+ addSpot()</text>
  </g>

  <!-- Comment Class -->
  <g><rect x="1380" y="180" width="280" height="320" fill="#FEE2E2" stroke="#DC2626" stroke-width="2" rx="4"/>
    <rect x="1380" y="180" width="280" height="35" fill="#DC2626" rx="4"/>
    <text x="1520" y="208" text-anchor="middle" class="class-name">Comment</text>
    <line x1="1380" y1="215" x2="1660" y2="215" stroke="#DC2626" stroke-width="1"/>
    <text x="1395" y="235" class="attr-name">- id: UUID</text>
    <text x="1395" y="255" class="attr-name">- content: string</text>
    <text x="1395" y="275" class="attr-name">- author: User</text>
    <text x="1395" y="295" class="attr-name">- spot: Spot</text>
    <text x="1395" y="315" class="attr-name">- parentComment: Comment</text>
    <text x="1395" y="335" class="attr-name">- createdAt: DateTime</text>
    <line x1="1380" y1="345" x2="1660" y2="345" stroke="#DC2626" stroke-width="1"/>
    <text x="1395" y="365" class="method-name">+ reply()</text>
    <text x="1395" y="385" class="method-name">+ getThread()</text>
  </g>

  <!-- Rating Class -->
  <g><rect x="1800" y="180" width="260" height="300" fill="#FEE2E2" stroke="#DC2626" stroke-width="2" rx="4"/>
    <rect x="1800" y="180" width="260" height="35" fill="#DC2626" rx="4"/>
    <text x="1930" y="208" text-anchor="middle" class="class-name">Rating</text>
    <line x1="1800" y1="215" x2="2060" y2="215" stroke="#DC2626" stroke-width="1"/>
    <text x="1815" y="235" class="attr-name">- id: UUID</text>
    <text x="1815" y="255" class="attr-name">- score: int (1-5)</text>
    <text x="1815" y="275" class="attr-name">- review: string</text>
    <text x="1815" y="295" class="attr-name">- user: User</text>
    <text x="1815" y="315" class="attr-name">- spot: Spot</text>
    <line x1="1800" y1="325" x2="2060" y2="325" stroke="#DC2626" stroke-width="1"/>
    <text x="1815" y="345" class="method-name">+ isVerified()</text>
    <text x="1815" y="365" class="method-name">+ delete()</text>
  </g>

  <!-- Favorite Class -->
  <g><rect x="2240" y="180" width="260" height="280" fill="#FEE2E2" stroke="#DC2626" stroke-width="2" rx="4"/>
    <rect x="2240" y="180" width="260" height="35" fill="#DC2626" rx="4"/>
    <text x="2370" y="208" text-anchor="middle" class="class-name">Favorite</text>
    <line x1="2240" y1="215" x2="2500" y2="215" stroke="#DC2626" stroke-width="1"/>
    <text x="2255" y="235" class="attr-name">- id: UUID</text>
    <text x="2255" y="255" class="attr-name">- user: User</text>
    <text x="2255" y="275" class="attr-name">- spot: Spot</text>
    <text x="2255" y="295" class="attr-name">- createdAt: DateTime</text>
    <line x1="2240" y1="305" x2="2500" y2="305" stroke="#DC2626" stroke-width="1"/>
    <text x="2255" y="325" class="method-name">+ toggle()</text>
    <text x="2255" y="345" class="method-name">+ remove()</text>
  </g>

  <!-- Image Class -->
  <g><rect x="520" y="650" width="260" height="280" fill="#DBEAFE" stroke="#10B981" stroke-width="2" rx="4"/>
    <rect x="520" y="650" width="260" height="35" fill="#10B981" rx="4"/>
    <text x="650" y="678" text-anchor="middle" class="class-name">Image</text>
    <line x1="520" y1="685" x2="780" y2="685" stroke="#10B981" stroke-width="1"/>
    <text x="535" y="705" class="attr-name">- id: UUID</text>
    <text x="535" y="725" class="attr-name">- url: string</text>
    <text x="535" y="745" class="attr-name">- caption: string</text>
    <text x="535" y="765" class="attr-name">- spot: Spot</text>
    <text x="535" y="785" class="attr-name">- order: int</text>
    <line x1="520" y1="795" x2="780" y2="795" stroke="#10B981" stroke-width="1"/>
    <text x="535" y="815" class="method-name">+ upload()</text>
    <text x="535" y="835" class="method-name">+ delete()</text>
  </g>

  <!-- Tag Class -->
  <g><rect x="960" y="650" width="260" height="260" fill="#DBEAFE" stroke="#10B981" stroke-width="2" rx="4"/>
    <rect x="960" y="650" width="260" height="35" fill="#10B981" rx="4"/>
    <text x="1090" y="678" text-anchor="middle" class="class-name">Tag</text>
    <line x1="960" y1="685" x2="1220" y2="685" stroke="#10B981" stroke-width="1"/>
    <text x="975" y="705" class="attr-name">- id: int</text>
    <text x="975" y="725" class="attr-name">- name: string</text>
    <text x="975" y="745" class="attr-name">- usageCount: int</text>
    <line x1="960" y1="755" x2="1220" y2="755" stroke="#10B981" stroke-width="1"/>
    <text x="975" y="775" class="method-name">+ addSpot()</text>
    <text x="975" y="795" class="method-name">+ removeSpot()</text>
  </g>

  <!-- Report Class -->
  <g><rect x="1380" y="650" width="280" height="300" fill="#FEF3C7" stroke="#F59E0B" stroke-width="2" rx="4"/>
    <rect x="1380" y="650" width="280" height="35" fill="#F59E0B" rx="4"/>
    <text x="1520" y="678" text-anchor="middle" class="class-name">Report</text>
    <line x1="1380" y1="685" x2="1660" y2="685" stroke="#F59E0B" stroke-width="1"/>
    <text x="1395" y="705" class="attr-name">- id: UUID</text>
    <text x="1395" y="725" class="attr-name">- reason: string</text>
    <text x="1395" y="745" class="attr-name">- description: string</text>
    <text x="1395" y="765" class="attr-name">- reporter: User</text>
    <text x="1395" y="785" class="attr-name">- spot: Spot</text>
    <text x="1395" y="805" class="attr-name">- status: ReportStatus</text>
    <line x1="1380" y1="815" x2="1660" y2="815" stroke="#F59E0B" stroke-width="1"/>
    <text x="1395" y="835" class="method-name">+ resolve()</text>
  </g>

  <!-- Notification Class -->
  <g><rect x="1800" y="650" width="280" height="300" fill="#FEF3C7" stroke="#F59E0B" stroke-width="2" rx="4"/>
    <rect x="1800" y="650" width="280" height="35" fill="#F59E0B" rx="4"/>
    <text x="1940" y="678" text-anchor="middle" class="class-name">Notification</text>
    <line x1="1800" y1="685" x2="2080" y2="685" stroke="#F59E0B" stroke-width="1"/>
    <text x="1815" y="705" class="attr-name">- id: UUID</text>
    <text x="1815" y="725" class="attr-name">- type: NotificationType</text>
    <text x="1815" y="745" class="attr-name">- message: string</text>
    <text x="1815" y="765" class="attr-name">- user: User</text>
    <text x="1815" y="785" class="attr-name">- isRead: boolean</text>
    <text x="1815" y="805" class="attr-name">- relatedId: string</text>
    <line x1="1800" y1="815" x2="2080" y2="815" stroke="#F59E0B" stroke-width="1"/>
    <text x="1815" y="835" class="method-name">+ markAsRead()</text>
  </g>

  <!-- Relationships -->
  <line x1="360" y1="350" x2="520" y2="350" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="440" y="340" class="legend" text-anchor="middle" font-size="11">crea (1:N)</text>

  <line x1="660" y1="560" x2="660" y2="650" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="720" y="605" class="legend" font-size="11">contiene (1:N)</text>

  <line x1="800" y1="360" x2="960" y2="320" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="870" y="330" class="legend" font-size="11">pertenece (1:N)</text>

  <!-- Footer -->
  <rect y="1100" width="3200" height="1500" fill="#F0F9FF" stroke="#7C3AED" stroke-width="2"/>
  <text x="100" y="1150" class="legend" font-weight="bold" font-size="14">Relaciones:</text>
  <text x="100" y="1180" class="legend">• User → Spot: 1:N (un usuario crea múltiples spots)</text>
  <text x="100" y="1210" class="legend">• User → Comment: 1:N (un usuario escribe múltiples comentarios)</text>
  <text x="100" y="1240" class="legend">• User → Rating: 1:N (un usuario valora múltiples spots)</text>
  <text x="100" y="1270" class="legend">• User → Favorite: 1:N (un usuario guarda múltiples favoritos)</text>
  <text x="100" y="1300" class="legend">• User → Report: 1:N (un usuario reporta múltiples spots)</text>
  <text x="100" y="1330" class="legend">• Spot → Category: N:1 (un spot pertenece a una categoría)</text>
  <text x="100" y="1360" class="legend">• Spot → Comment: 1:N (un spot recibe múltiples comentarios)</text>
  <text x="100" y="1390" class="legend">• Spot → Image: 1:N (un spot tiene múltiples imágenes)</text>
  <text x="100" y="1420" class="legend">• Comment → Comment: auto-relación (comentarios pueden tener respuestas - threads)</text>
  <text x="100" y="1450" class="legend">• Spot ↔ Tag: N:M (un spot tiene múltiples tags, un tag está en múltiples spots)</text>
  
  <text x="100" y="1500" class="legend" font-weight="bold" font-size="14">Patrones Implementados:</text>
  <text x="100" y="1530" class="legend">✓ Value Objects: UserRole, ReportStatus, NotificationType</text>
  <text x="100" y="1560" class="legend">✓ Agregaciones: User es agregado raíz para Comment, Rating, Favorite, Report, Notification</text>
  <text x="100" y="1590" class="legend">✓ Composición: Spot contiene Images (eliminación en cascada)</text>
  <text x="100" y="1620" class="legend">✓ Repository Pattern: UserRepository, SpotRepository, etc.</text>
  <text x="100" y="2550" class="legend" text-anchor="middle" font-size="11">© 2024 SpotMap - Arquitectura de Dominio | DDD (Domain-Driven Design) | PHP 8.2+</text>
</svg>

@startuml UI_Navigation_Flowchart
!theme plain

title SpotMap - Diagrama de Flujo de NavegaciÃ³n por Roles

' Estados iniciales
|Visitante|
start
:Acceder a SpotMap;

' DecisiÃ³n de login
if (Â¿Usuario registrado?) then (no)
  :Ver Mapa PÃºblico;
  
  fork
    :Explorar Spots;
    :Filtrar por categorÃ­a;
    :Buscar spots;
    :Ver detalle spot;
    note right
      Sin opciones de:
      - Crear spot
      - Favoritos
      - Comentar
      - Valorar
    end note
  fork again
    :Ver InformaciÃ³n;
    :Sobre SpotMap;
    :TÃ©rminos;
    :Privacidad;
  end fork
  
  :Ir a Login/Registro;
  
  if (Â¿Registrarse?) then (sÃ­)
    |Visitante|
    :Formulario Registro;
    :Crear cuenta;
    :Verificar email;
    :Login automÃ¡tico;
  else (login)
    |Visitante|
    :Formulario Login;
    :Validar credenciales;
  endif
  
else (sÃ­)
  :Iniciar SesiÃ³n;
endif

' Usuario autenticado
|Usuario Registrado|
:Dashboard Usuario;

fork
  :Ver Mapa Interactivo;
  
  fork
    :Explorar spots;
    :Aplicar filtros;
    :Ver detalle spot;
    
    fork
      :â­ Valorar spot;
    fork again
      :â¤ï¸ AÃ±adir a favoritos;
    fork again
      :ğŸ’¬ Comentar;
      :Responder comentarios;
    fork again
      :ğŸ“¢ Reportar contenido;
    fork again
      :ğŸ”— Compartir spot;
    end fork
    
  fork again
    :â• Crear Nuevo Spot;
    :Completar formulario;
    
    repeat
      :Subir imÃ¡genes;
      :Seleccionar ubicaciÃ³n;
      :AÃ±adir descripciÃ³n;
      :Elegir categorÃ­a;
      :Validar campos;
    repeat while (Â¿Formulario vÃ¡lido?) is (no)
    ->sÃ­;
    
    :Vista previa;
    :Guardar spot;
    :Notificar creaciÃ³n;
    
  end fork

fork again
  :Mi Perfil;
  
  fork
    :Ver info personal;
    :Actualizar avatar;
    :Editar datos;
  fork again
    :Mis Spots creados;
    
    fork
      :âœï¸ Editar spot;
    fork again
      :ğŸ—‘ï¸ Eliminar spot;
    fork again
      :ğŸ“Š Ver estadÃ­sticas;
    end fork
    
  fork again
    :â¤ï¸ Mis Favoritos;
    :Ver spots guardados;
    :Eliminar favorito;
  fork again
    :ğŸ’¬ Mis Comentarios;
    :Ver historial;
    :Editar comentario;
  fork again
    :âš™ï¸ ConfiguraciÃ³n;
    :Cambiar contraseÃ±a;
    :Privacidad;
    :Notificaciones;
  end fork

fork again
  :ğŸ”” Notificaciones;
  :Ver notificaciones;
  :Marcar como leÃ­da;
  
end fork

' Verificar si es Moderador
if (Â¿Es Moderador o Admin?) then (sÃ­)
  
  |Moderador|
  :Panel de ModeraciÃ³n;
  
  fork
    :ğŸ“‹ Reportes Pendientes;
    :Filtrar reportes;
    :Ver detalle reporte;
    
    :Vista previa contenido;
    :Evaluar reporte;
    
    if (Â¿AcciÃ³n a tomar?) then (aprobar)
      :âœ… Aprobar contenido;
      :Cerrar reporte;
    else if (ocultar)
      :ğŸ‘ï¸ Ocultar contenido;
      :Notificar autor;
    else if (eliminar)
      :ğŸ—‘ï¸ Eliminar contenido;
      :Notificar autor;
      :Registrar decisiÃ³n;
    else (cerrar sin acciÃ³n)
      :âŒ Cerrar reporte;
      :AÃ±adir comentario;
    endif
    
  fork again
    :ğŸ‘ï¸ Contenido Oculto;
    :Listar spots ocultos;
    :Listar comentarios ocultos;
    
    if (Â¿Restaurar?) then (sÃ­)
      :Restaurar contenido;
      :Notificar autor;
    endif
    
  fork again
    :ğŸ“Š EstadÃ­sticas;
    :Reportes por perÃ­odo;
    :Contenido eliminado;
    :Usuarios reportados;
    :Exportar informe;
    
  fork again
    :ğŸ“œ Historial Decisiones;
    :Ver acciones pasadas;
    :Filtrar por fecha;
    :Ver moderador;
    
  end fork
  
  ' Verificar si es Admin
  if (Â¿Es Administrador?) then (sÃ­)
    
    |Administrador|
    :Panel de AdministraciÃ³n;
    
    fork
      :ğŸ“Š Dashboard Admin;
      :MÃ©tricas globales;
      :GrÃ¡ficos actividad;
      :Ãšltimas acciones;
      note right
        Auto-refresh cada 30s
      end note
      
    fork again
      :ğŸ‘¥ GestiÃ³n Usuarios;
      :Listar usuarios;
      :Buscar usuario;
      
      fork
        :Ver perfil completo;
      fork again
        :Suspender usuario;
      fork again
        :Activar usuario;
      fork again
        :Cambiar rol;
        note right
          Roles disponibles:
          - Usuario
          - Moderador
          - Admin
        end note
      fork again
        :Ver reportes usuario;
      fork again
        :Eliminar usuario;
        :Confirmar acciÃ³n;
      end fork
      
    fork again
      :ğŸ“ GestiÃ³n Contenido;
      
      fork
        :ğŸ·ï¸ CategorÃ­as;
        
        fork
          :Crear categorÃ­a;
          :Definir nombre;
          :Asignar color;
          :Asignar icono;
        fork again
          :Editar categorÃ­a;
        fork again
          :Eliminar categorÃ­a;
          :Reasignar spots;
        fork again
          :Reordenar categorÃ­as;
        end fork
        
      fork again
        :ğŸ·ï¸ Etiquetas (Tags);
        
        fork
          :Crear tag;
        fork again
          :Editar tag;
        fork again
          :Eliminar tag;
        fork again
          :Fusionar tags;
        end fork
        
      fork again
        :ğŸ“ Spots;
        :Listar todos spots;
        
        fork
          :Editar spot;
        fork again
          :Eliminar spot;
        fork again
          :â­ Destacar spot;
        end fork
        
      fork again
        :ğŸ’¬ Comentarios;
        :Moderar comentarios;
        :Eliminar inapropiados;
        
      end fork
      
    fork again
      :ğŸ“¢ GestiÃ³n Reportes;
      :Ver todos reportes;
      :Reportes resueltos;
      :EstadÃ­sticas detalladas;
      :Exportar datos CSV/JSON;
      
    fork again
      :âš™ï¸ ConfiguraciÃ³n Sistema;
      
      fork
        :Ajustes globales;
        :LÃ­mites de subida;
        :Tiempo sesiÃ³n;
      fork again
        :ğŸ¨ Tema visual;
        :Modo claro/oscuro;
      fork again
        :ğŸ”§ Modo mantenimiento;
        :Activar/Desactivar;
        :Mensaje personalizado;
      fork again
        :ğŸ’¾ Backups;
        :Programar backup;
        :Restaurar backup;
      fork again
        :ğŸ“§ Email settings;
        :SMTP config;
        :Plantillas email;
      end fork
      
    fork again
      :ğŸ“œ Logs Sistema;
      
      fork
        :Actividad usuarios;
        :Login/logout;
        :Acciones realizadas;
      fork again
        :Cambios admin;
        :Modificaciones config;
        :Cambios de roles;
      fork again
        :âš ï¸ Errores sistema;
        :Errores 500;
        :Errores BD;
      end fork
      
      :Filtrar logs;
      :Exportar logs;
      
    end fork
    
  endif (admin)
  
endif (moderador/admin)

' Fin de sesiÃ³n
|Cualquier Usuario|
:Cerrar SesiÃ³n;
stop

@enduml
